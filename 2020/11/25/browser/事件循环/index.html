

<!DOCTYPE html>
<html lang="zh-CN" data-default-color-scheme=&#34;auto&#34;>



<head>
  <meta charset="UTF-8">
  <link rel="apple-touch-icon" sizes="76x76" href="/img/favicont.png">
  <link rel="icon" type="image/png" href="/img/favicont.png">
  <meta name="viewport"
        content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  
  <meta name="theme-color" content="#2f4154">
  <meta name="description" content="ç§‹å¡åšå®¢">
  <meta name="author" content="Taoqiupo">
  <meta name="keywords" content="">
  <title>Event Loopè§£è¯» - qiupoBlog</title>

  <link  rel="stylesheet" href="https://cdn.staticfile.org/twitter-bootstrap/4.5.3/css/bootstrap.min.css" />


  <link  rel="stylesheet" href="https://cdn.staticfile.org/github-markdown-css/4.0.0/github-markdown.min.css" />
  <link  rel="stylesheet" href="/lib/hint/hint.min.css" />

  
    
    
      
      <link  rel="stylesheet" href="https://cdn.staticfile.org/highlight.js/10.1.2/styles/github-gist.min.css" />
    
  

  
    <link  rel="stylesheet" href="https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.css" />
  



<!-- ä¸»é¢˜ä¾èµ–çš„å›¾æ ‡åº“ï¼Œä¸è¦è‡ªè¡Œä¿®æ”¹ -->

<link rel="stylesheet" href="//at.alicdn.com/t/font_1749284_ba1fz6golrf.css">



<link rel="stylesheet" href="//at.alicdn.com/t/font_1736178_kmeydafke9r.css">


<link  rel="stylesheet" href="/css/main.css" />

<!-- è‡ªå®šä¹‰æ ·å¼ä¿æŒåœ¨æœ€åº•éƒ¨ -->

  
<link rel="stylesheet" href="/css/iconfont.css">



  <script id="fluid-configs">
    var Fluid = window.Fluid || {};
    var CONFIG = {"hostname":"example.com","root":"/","version":"1.8.5","typing":{"enable":true,"typeSpeed":50,"cursorChar":"ğŸ‡¨ğŸ‡³","loop":false},"toc":{"enable":true,"headingSelector":"h1,h2,h3,h4,h5,h6","collapseDepth":0},"anchorjs":{"enable":true,"element":"h1,h2,h3,h4,h5,h6","placement":"right","visible":"hover","icon":""},"copy_btn":true,"image_zoom":{"enable":true},"lazyload":{"enable":true,"onlypost":false},"web_analytics":{"enable":false,"baidu":null,"google":null,"gtag":null,"tencent":{"sid":null,"cid":null},"woyaola":null,"cnzz":null,"leancloud":{"app_id":null,"app_key":null,"server_url":null}}};
  </script>
  <script  src="/js/utils.js" ></script>
  <script  src="/js/color-schema.js" ></script>
<meta name="generator" content="Hexo 5.4.0"></head>


<body>
  <header style="height: 70vh;">
    <nav id="navbar" class="navbar fixed-top  navbar-expand-lg navbar-dark scrolling-navbar">
  <div class="container">
    <a class="navbar-brand"
       href="/">&nbsp;<strong>QiuPo'Park</strong>&nbsp;</a>

    <button id="navbar-toggler-btn" class="navbar-toggler" type="button" data-toggle="collapse"
            data-target="#navbarSupportedContent"
            aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <div class="animated-icon"><span></span><span></span><span></span></div>
    </button>

    <!-- Collapsible content -->
    <div class="collapse navbar-collapse" id="navbarSupportedContent">
      <ul class="navbar-nav ml-auto text-center">
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="iconfont icon-home-fill"></i>
                é¦–é¡µ
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/archives/">
                <i class="iconfont icon-archive-fill"></i>
                å½’æ¡£
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/categories/">
                <i class="iconfont icon-category-fill"></i>
                åˆ†ç±»
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/tags/">
                <i class="iconfont icon-tags-fill"></i>
                æ ‡ç­¾
              </a>
            </li>
          
        
          
          
          
          
            <li class="nav-item">
              <a class="nav-link" href="/about/">
                <i class="iconfont icon-user-fill"></i>
                å…³äº
              </a>
            </li>
          
        
        
          <li class="nav-item" id="search-btn">
            <a class="nav-link" data-toggle="modal" data-target="#modalSearch">&nbsp;<i
                class="iconfont icon-search"></i>&nbsp;</a>
          </li>
        
        
          <li class="nav-item" id="color-toggle-btn">
            <a class="nav-link" href="javascript:">&nbsp;<i
                class="iconfont icon-dark" id="color-toggle-icon"></i>&nbsp;</a>
          </li>
        
      </ul>
    </div>
  </div>
</nav>

    <div class="banner intro-2" id="background" parallax=true
         style="background: url('/img/moonbg.jpg') no-repeat center center;
           background-size: cover;">
      <div class="full-bg-img">
        <div class="mask flex-center" style="background-color: rgba(0, 0, 0, 0.3)">
          <div class="page-header text-center fade-in-up">
            <span class="h2" id="subtitle" title="Event Loopè§£è¯»">
              
            </span>

            
              <div class="mt-3">
  
    <span class="post-meta mr-2">
      <i class="iconfont icon-author" aria-hidden="true"></i>
      Taoqiupo
    </span>
  
  
    <span class="post-meta">
      <i class="iconfont icon-date-fill" aria-hidden="true"></i>
      <time datetime="2020-11-25 10:35" pubdate>
        2020å¹´11æœˆ25æ—¥ ä¸Šåˆ
      </time>
    </span>
  
</div>

<div class="mt-1">
  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-chart"></i>
      1.6k å­—
    </span>
  

  
    
    <span class="post-meta mr-2">
      <i class="iconfont icon-clock-fill"></i>
      
      
      19
       åˆ†é’Ÿ
    </span>
  

  
  
</div>

            
          </div>

          
        </div>
      </div>
    </div>
  </header>

  <main>
    
      

<div class="container-fluid">
  <div class="row">
    <div class="d-none d-lg-block col-lg-2"></div>
    <div class="col-lg-8 nopadding-md">
      <div class="container nopadding-md" id="board-ctn">
        <div class="py-5" id="board">
          <article class="post-content mx-auto">
            <!-- SEO header -->
            <h1 style="display: none">Event Loopè§£è¯»</h1>
            
            <div class="markdown-body">
              <h2 id="æµè§ˆå™¨Event-Loop"><a href="#æµè§ˆå™¨Event-Loop" class="headerlink" title="æµè§ˆå™¨Event Loop"></a>æµè§ˆå™¨Event Loop</h2><h3 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h3><p>To coordinate events, user interaction, scripts, rendering, networking, and so forth, user agents must use event loops as described in this section. Each agent has an associated event loop, which is unique to that agent.</p>
<p>è¦æƒ³äº†è§£æµè§ˆå™¨çš„äº‹ä»¶æœºåˆ¶ï¼Œæˆ‘ä»¬éœ€è¦çŸ¥é“ï¼Œæµè§ˆå™¨çš„çº¿ç¨‹åŸºæœ¬æ¦‚å¿µ</p>
<h3 id="æµè§ˆå™¨è¿›ç¨‹çº¿ç¨‹"><a href="#æµè§ˆå™¨è¿›ç¨‹çº¿ç¨‹" class="headerlink" title="æµè§ˆå™¨è¿›ç¨‹çº¿ç¨‹"></a>æµè§ˆå™¨è¿›ç¨‹çº¿ç¨‹</h3><p>æµè§ˆå™¨ä¸­æ˜¯å¤šçº¿ç¨‹å¤šè¿›ç¨‹çš„ï¼Œæˆ‘ä»¬æ¯æ‰“å¼€ä¸€ä¸ªæ–°çš„é¡µé¢å°±ä¼šæ‰“å¼€ä¸€ä¸ªæ–°çš„è¿›ç¨‹ï¼Œæ¯ä¸ªè¿›ç¨‹ä¸­éƒ½ä¼šæœ‰å¤šä¸ªçº¿ç¨‹åœ¨è¿ä½œï¼Œå…¶ä¸­å¸¸è§çš„çº¿ç¨‹æœ‰ä»¥ä¸‹å‡ ç§ï¼š</p>
<ol>
<li>GUIæ¸²æŸ“çº¿ç¨‹</li>
</ol>
<ul>
<li>è´Ÿè´£é¡µé¢æ¸²æŸ“ï¼Œå¤„ç†HTMLï¼ŒCSSè§£æï¼ŒDOMæ ‘çš„æ„å»ºã€å¸ƒå±€å’Œç»˜åˆ¶ï¼›</li>
<li>å½“é¡µé¢å‘ç”Ÿé‡ç»˜é‡æ’æ—¶ä¼šé‡æ–°è°ƒç”¨æ­¤çº¿ç¨‹ï¼›</li>
<li>è¯¥çº¿ç¨‹å’ŒJSçº¿ç¨‹äº’æ–¥ï¼Œæ‰€ä»¥å½“GUIæ‰§è¡Œæ—¶ï¼ŒJSä¼šè¢«æŒ‚èµ·ï¼ŒJSçº¿ç¨‹æ‰§è¡Œæ—¶ï¼ŒGUIä¼šè¢«æŒ‚èµ·ï¼Œç›´åˆ°ä»»åŠ¡é˜Ÿåˆ—ç©ºäº†ï¼Œæ‰ä¼šå»æ‰§è¡ŒGUI</li>
</ul>
<ol start="2">
<li>JSçº¿ç¨‹</li>
</ol>
<ul>
<li>è´Ÿè´£jsä»£ç çš„æ‰§è¡Œï¼›</li>
<li>æ‰§è¡Œå‡†å¤‡å¥½çš„äº‹ä»¶ï¼›</li>
</ul>
<ol start="3">
<li>å®šæ—¶å™¨çº¿ç¨‹</li>
</ol>
<ul>
<li>è´Ÿè´£æ‰§è¡Œå®šæ—¶å™¨ä»»åŠ¡ä¾‹å¦‚ï¼šsetTimeout,setIntervalï¼›</li>
<li>ä¸»çº¿ç¨‹æ‰§è¡Œé‡åˆ°å®šæ—¶å™¨ä»»åŠ¡æ—¶ï¼Œå°†ä»»åŠ¡åŠ å…¥å®šæ—¶å™¨çº¿ç¨‹ï¼Œåœ¨è®¡æ—¶å®Œæ¯•åï¼Œä»»åŠ¡ä¼šåŠ å…¥ä»»åŠ¡é˜Ÿåˆ—ï¼Œç­‰å¾…JSçº¿ç¨‹çš„æ‰§è¡Œ</li>
</ul>
<ol start="4">
<li>äº‹ä»¶è§¦å‘çº¿ç¨‹</li>
</ol>
<p>è´Ÿè´£å°†å‡†å¤‡å¥½çš„äº‹ä»¶æ·»åŠ åˆ°ä»»åŠ¡é˜Ÿåˆ—ï¼Œç­‰å¾…JSçº¿ç¨‹æ‰§è¡Œ</p>
<ol start="5">
<li>å¼‚æ­¥è¯·æ±‚çº¿ç¨‹</li>
</ol>
<p>è´Ÿè´£æ‰§è¡Œå¼‚æ­¥è¯·æ±‚ä¸€ç±»çš„æ“ä½œï¼Œå¦‚Promisï¼Œajaxï¼Œaxios<br>ä¸»çº¿ç¨‹æ‰§è¡Œåˆ°äº†å¼‚æ­¥ä»»åŠ¡åï¼Œå°†ä»»åŠ¡è®²ç»™å¼‚æ­¥è¯·æ±‚çº¿ç¨‹æ‰§è¡Œï¼Œæ‰§è¡Œå®Œåï¼Œå°†å›è°ƒå‡½æ•°æ·»åŠ åˆ°å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œç­‰å¾…JSçº¿ç¨‹æ‰§è¡Œ</p>
<h2 id="äº‹ä»¶é˜Ÿåˆ—"><a href="#äº‹ä»¶é˜Ÿåˆ—" class="headerlink" title="äº‹ä»¶é˜Ÿåˆ—"></a>äº‹ä»¶é˜Ÿåˆ—</h2><p><strong>æµè§ˆå™¨ä¸­çš„Event-loop</strong><br>æµè§ˆå™¨ä¸­çš„äº‹ä»¶å¾ªç¯æœºåˆ¶ä¸­æœ‰ä¸¤ä¸­é˜Ÿåˆ—ï¼Œä¸€ä¸ªæ˜¯å®ä»»åŠ¡ä¸€ä¸ªæ˜¯å¾®ä»»åŠ¡ï¼Œå½“ä¸»çº¿ç¨‹é‡åˆ°åŒæ­¥æ“ä½œæ—¶åŠ å…¥å®ä»»åŠ¡ï¼Œé‡åˆ°å¼‚æ­¥æ“ä½œæ—¶åŠ å…¥å¾®ä»»åŠ¡ã€‚å¸¸è§çš„å®ä»»åŠ¡ï¼šsetTimeout,setIntervalï¼Œscriptï¼ˆæ•´æ®µä»£ç ï¼‰ï¼ŒI/Oæ“ä½œï¼ŒUIæ¸²æŸ“å¸¸è§çš„å¾®ä»»åŠ¡ï¼šPromise.then,MutationObserver<br>&emsp;&emsp;å…¶ä¸­çš„æ‰§è¡Œæœºåˆ¶æ˜¯å½“æŸä¸ªå®ä»»åŠ¡æ‰§è¡Œå®Œå,ä¼šæŸ¥çœ‹æ˜¯å¦æœ‰å¾®ä»»åŠ¡é˜Ÿåˆ—ã€‚å¦‚æœæœ‰ï¼Œå…ˆæ‰§è¡Œå¾®ä»»åŠ¡é˜Ÿåˆ—ä¸­çš„æ‰€æœ‰ä»»åŠ¡ï¼Œå¦‚æœæ²¡æœ‰ï¼Œä¼šè¯»å–å®ä»»åŠ¡é˜Ÿåˆ—ä¸­æ’åœ¨æœ€å‰çš„ä»»åŠ¡ï¼Œæ‰§è¡Œå®ä»»åŠ¡çš„è¿‡ç¨‹ä¸­ï¼Œé‡åˆ°å¾®ä»»åŠ¡ï¼Œä¾æ¬¡åŠ å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—ã€‚æ ˆç©ºåï¼Œå†æ¬¡è¯»å–å¾®ä»»åŠ¡é˜Ÿåˆ—é‡Œçš„ä»»åŠ¡ï¼Œä¾æ¬¡ç±»æ¨ã€‚å…¶ä¸­å¾®ä»»åŠ¡æ˜¯ä¸æ‰“æ–­çš„ç›´æ¥æ‰§è¡Œå®Œä¸€æ•´ä¸ªé˜Ÿåˆ—çš„ä»»åŠ¡ã€‚</p>
<h3 id="å®ä»»åŠ¡"><a href="#å®ä»»åŠ¡" class="headerlink" title="å®ä»»åŠ¡"></a>å®ä»»åŠ¡</h3><h3 id="å¾®ä»»åŠ¡"><a href="#å¾®ä»»åŠ¡" class="headerlink" title="å¾®ä»»åŠ¡"></a>å¾®ä»»åŠ¡</h3><h3 id="ä¸€äº›é¢˜ç›®è§£è¯»"><a href="#ä¸€äº›é¢˜ç›®è§£è¯»" class="headerlink" title="ä¸€äº›é¢˜ç›®è§£è¯»"></a>ä¸€äº›é¢˜ç›®è§£è¯»</h3><p>å¯ä»¥é€šè¿‡ä¸€ä¸ªä¾‹å­æ¥è¿›è¡Œåˆ†æï¼š</p>
<ol>
<li><pre><code class="hljs javascript"><span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;script start&#x27;</span>);
    <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">async1</span>(<span class="hljs-params"></span>)</span>&#123;
        <span class="hljs-keyword">await</span>  async2().then(<span class="hljs-function"><span class="hljs-params">_</span>=&gt;</span><span class="hljs-built_in">console</span>.log(_));
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;async1 end&#x27;</span>)
        <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;async1 return&#x27;</span>;
    &#125;
    <span class="hljs-keyword">async</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">async2</span>(<span class="hljs-params"></span>)</span>&#123;
        <span class="hljs-built_in">Promise</span>.resolve(<span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;async2 promise&#x27;</span>)).then(<span class="hljs-function"><span class="hljs-params">_</span>=&gt;</span><span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;async2 then&#x27;</span>));
        <span class="hljs-keyword">await</span> <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;async2 await&#x27;</span>);
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;async2 end&#x27;</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;async2 return&#x27;</span>;
    &#125;
    async1().then(<span class="hljs-function"><span class="hljs-params">_</span>=&gt;</span><span class="hljs-built_in">console</span>.log(_,<span class="hljs-string">&#x27;async1 then&#x27;</span>));

    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>&#123;
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;settimeout&#x27;</span>);
    &#125;,<span class="hljs-number">0</span>);

    <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-params">resolve</span> =&gt;</span> &#123;
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;promise&#x27;</span>);
        resolve();
    &#125;).then(<span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) </span>&#123;
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;function1&#x27;</span>);
    &#125;).then(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>)</span>&#123;
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;function2&#x27;</span>);
    &#125;);
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;script end&#x27;</span>)</code></pre>
åœ¨è¿™ä¸ªä¾‹å­é‡Œï¼š</li>
</ol>
<ul>
<li>é¦–å…ˆ<strong>è¾“å‡º</strong><code>script start</code></li>
<li>ç„¶åæ˜¯<code>async1</code>çš„å†…å®¹ï¼Œæ­¤åˆ»<code>await</code>æ‰§è¡Œ<code>async2</code><strong>è¾“å‡º</strong><code>async2 promise</code>,ç„¶å<code>then</code>è¿›å…¥å¾®ä»»åŠ¡</li>
<li>ç„¶åä¸‹é¢çš„<code>await</code><strong>è¾“å‡º</strong><code>async2 await</code>ï¼Œç„¶ååé¢çš„é˜»å¡ï¼Œè¿›å…¥å¾®ä»»åŠ¡</li>
<li>ç„¶åç»§ç»­æ‰§è¡Œï¼Œ<strong>è¾“å‡º</strong><code>promise</code>ï¼Œ<code>then</code>è¿›å…¥å¾®ä»»åŠ¡</li>
<li>ç„¶å<strong>è¾“å‡º</strong><code>script end</code></li>
<li>æ­¤æ—¶å®ä»»åŠ¡æ‰§è¡Œå®Œä¸€è½®</li>
<li>å¾®ä»»åŠ¡å¼€å§‹æ‰§è¡Œï¼Œå…ˆ<strong>è¾“å‡º</strong><code>async2 then</code>ï¼Œ<code>async2 end</code>ï¼Œç„¶å<code>return</code>å€¼è¿›å…¥å¾®ä»»åŠ¡ï¼ŒåŒä¸€æ‰¹æ¬¡çš„å¾®ä»»åŠ¡ä¸­ç»§ç»­æ‰§è¡Œ<strong>è¾“å‡º</strong><code>function1</code>ï¼Œç„¶å<code>2then</code>åˆè¿›å…¥å¾®ä»»åŠ¡</li>
<li>ç»§ç»­æ‰§è¡Œå¾®ä»»åŠ¡ï¼Œæ­¤æ—¶å…ˆ<strong>è¾“å‡º</strong><code>async2 return</code>ï¼Œç„¶å<code>async1</code>çš„<code>await</code>åçš„è¿›å…¥å¾®ä»»åŠ¡</li>
<li><strong>è¾“å‡º</strong><code>function2</code></li>
<li>åœ¨æ‰§è¡Œå¾®ä»»åŠ¡<strong>è¾“å‡º</strong><code>async1 end</code>ï¼Œç„¶å<code>1return</code>è¿›å…¥<code>async1().then(_=&gt;console.log(_,&#39;async1 then&#39;));</code>çš„å¾®ä»»åŠ¡</li>
<li><strong>è¾“å‡º</strong><code>async1 return</code>,<code>async1 then</code>ï¼Œå¾®ä»»åŠ¡ä¸ºç©ºï¼Œæ‰§è¡Œå®ä»»åŠ¡</li>
<li><strong>è¾“å‡º</strong><code>settimeout</code></li>
</ul>
<p>æœ€ç»ˆé¡ºåºä¸º</p>
<pre><code class="hljs applescript"><span class="hljs-keyword">script</span> start
async2 promise
async2 await
promise
<span class="hljs-keyword">script</span> <span class="hljs-keyword">end</span>
async2 <span class="hljs-keyword">then</span>
async2 <span class="hljs-keyword">end</span>
function1
async2 <span class="hljs-literal">return</span>
function2
async1 <span class="hljs-keyword">end</span>
async1 <span class="hljs-literal">return</span>
async1 <span class="hljs-keyword">then</span>
settimeout</code></pre>

<ol>
<li><pre><code class="hljs coffeescript"><span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;e1&#x27;</span>)
<span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-params">(r,j)</span>=&gt;</span>&#123;r()&#125;).<span class="hljs-keyword">then</span>(<span class="hljs-function"><span class="hljs-params">()</span>=&gt;</span>&#123;
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;promise3&#x27;</span>);
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function"><span class="hljs-params">()</span>=&gt;</span>&#123;
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;timeout3&#x27;</span>)
    &#125;,<span class="hljs-number">0</span>)
&#125;)
<span class="hljs-built_in">setTimeout</span>(<span class="hljs-function"><span class="hljs-params">()</span>=&gt;</span>&#123;
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;timeout1&#x27;</span>)
    <span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-params">(r,j)</span>=&gt;</span>&#123;r()&#125;).<span class="hljs-keyword">then</span>(<span class="hljs-function"><span class="hljs-params">()</span>=&gt;</span>&#123;
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;promise1&#x27;</span>)
    &#125;)
&#125;,<span class="hljs-number">5000</span>)
<span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;e2&#x27;</span>)
<span class="hljs-keyword">new</span> <span class="hljs-built_in">Promise</span>(<span class="hljs-function"><span class="hljs-params">(r,j)</span>=&gt;</span>&#123;r(<span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;1&#x27;</span>))&#125;).<span class="hljs-keyword">then</span>(<span class="hljs-function"><span class="hljs-params">()</span>=&gt;</span>&#123;
    <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;promise2&#x27;</span>);
    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function"><span class="hljs-params">()</span>=&gt;</span>&#123;
        <span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;timeout2&#x27;</span>)
    &#125;,<span class="hljs-number">0</span>)
&#125;)
<span class="hljs-built_in">console</span>.log(<span class="hljs-string">&#x27;e3&#x27;</span>)</code></pre>
åœ¨è¿™ä¸ªä¾‹å­é‡Œï¼š</li>
</ol>
<ul>
<li>ä¸»çº¿ç¨‹<code>main</code>è¿›å…¥æ ˆæ‰§è¡Œæ“ä½œï¼Œæ­¤æ—¶æ‰§è¡Œ<code>script</code>ä»£ç ï¼Œä¼šæŠŠ<strong>è¾“å‡º</strong><code>e1</code></li>
<li>ä¹‹åé‡åˆ°<code>Promise.then</code>ï¼Œä¼šå°†å…¶åŠ å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—</li>
<li>å†å¾€ä¸‹æ‰§è¡Œï¼Œé‡åˆ°<code>setTimeout</code>ï¼Œå°†å…¶åŠ å…¥å®šæ—¶å™¨çº¿ç¨‹ï¼Œç­‰å¾…è®¡æ•°å®ŒæˆååŠ å…¥å®ä»»åŠ¡é˜Ÿåˆ—</li>
<li>å†å¾€ä¸‹æ‰§è¡Œ<strong>è¾“å‡º</strong><code>e2</code></li>
<li>å¾€ä¸‹æ‰§è¡Œé‡åˆ°<code>Promise</code>ï¼Œå…ˆå°†<code>resolve</code>è¾“å‡º1ï¼Œç„¶åå°†<code>then</code>åŠ å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—</li>
<li>å†å¾€ä¸‹æ‰§è¡Œ<strong>è¾“å‡º</strong>e3ï¼Œæ­¤æ—¶<code>script</code>ä»£ç æ‰§è¡Œå®Œæ¯•ï¼Œç«‹åˆ»æœç´¢å¾®ä»»åŠ¡æ˜¯å¦ä¸ºç©ºï¼Œä¸ä¸ºç©ºå°±ç«‹åˆ»æ‰§è¡Œæ­¤æ—¶å¾®ä»»åŠ¡çš„é˜Ÿåˆ—</li>
<li>æ­¤æ—¶å¾®ä»»åŠ¡é˜Ÿåˆ—å…ˆè¿›å…ˆå‡ºè¾“å‡º<code>promise3</code>ï¼Œç„¶åé‡åˆ°<code>setTimeout</code>ï¼Œå°†å…¶åŠ å…¥å®šæ—¶å™¨çº¿ç¨‹ï¼Œç­‰å¾…è®¡æ•°å®ŒæˆååŠ å…¥å®ä»»åŠ¡é˜Ÿåˆ—</li>
<li>å†å¾€ä¸‹æ‰§è¡Œç¬¬äºŒä¸ªå¾®ä»»åŠ¡ï¼Œè¾“å‡º<code>promise2</code>ï¼Œç„¶åé‡åˆ°<code>setTimeout</code>ï¼Œå°†å…¶åŠ å…¥å®šæ—¶å™¨çº¿ç¨‹ï¼Œç­‰å¾…è®¡æ•°å®ŒæˆååŠ å…¥å®ä»»åŠ¡é˜Ÿåˆ—</li>
<li>å†å¾€ä¸‹æ‰§è¡Œå‘ç°å¾®ä»»åŠ¡é˜Ÿåˆ—ä¸ºç©ºï¼Œå»å®ä»»åŠ¡é˜Ÿåˆ—å»å¯»æ‰¾æ˜¯å¦æœ‰ä»»åŠ¡</li>
<li>åœ¨å®ä»»åŠ¡å‘ç°æ­¤æ—¶å…ˆæ‰§è¡Œå®Œçš„<code>setTimeout3</code>ï¼Œè¾“å‡º<code>timeout3</code>ï¼Œå°†<code>then</code>åŠ å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—</li>
<li>æ‰§è¡Œå®Œè¯¥æ¬¡å®ä»»åŠ¡åç«‹åˆ»å¯»æ‰¾å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œä¸ºç©ºï¼Œå»å¯»æ‰¾å®ä»»åŠ¡é˜Ÿåˆ—</li>
<li>åœ¨å®ä»»åŠ¡å‘ç°å…ˆæ‰§è¡Œå®Œçš„<code>setTimeout2</code>ä»»åŠ¡ï¼Œæ‰§è¡Œ<strong>è¾“å‡º</strong><code>timeout2</code></li>
<li>æ­¤æ—¶ä»»åŠ¡é˜Ÿåˆ—ä¸ºç©ºï¼Œç­‰å¾…æ–°ä»»åŠ¡åŠ å…¥</li>
<li>æ­¤æ—¶<code>setTimeout1</code>è®¡æ•°å®Œæ¯•ï¼ŒåŠ å…¥å®ä»»åŠ¡é˜Ÿåˆ—ï¼Œå¹¶æ‰§è¡Œï¼Œ<strong>è¾“å‡º</strong><code>timeout1</code>ï¼Œå°†<code>then</code>åŠ å…¥å¾®ä»»åŠ¡é˜Ÿåˆ—</li>
<li>æ‰§è¡Œå®Œè¯¥æ¬¡å®ä»»åŠ¡åç«‹åˆ»å¯»æ‰¾å¾®ä»»åŠ¡é˜Ÿåˆ—ï¼Œå¹¶æ‰§è¡Œï¼Œ<strong>è¾“å‡º</strong><code>promise1</code><br>æœ€ç»ˆç»“æœä¸º<pre><code class="hljs mercury">e1 
e2 
<span class="hljs-number">1</span> 
e3 
promise3 
promise2 
timeout3 
timeout2 
timeout1 
<span class="hljs-keyword">promise</span></code></pre></li>
</ul>

            </div>
            <hr>
            <div>
              <div class="post-metas mb-3">
                
                  <div class="post-meta mr-3">
                    <i class="iconfont icon-category"></i>
                    
                      <a class="hover-with-bg" href="/categories/%E6%B5%8F%E8%A7%88%E5%99%A8/">æµè§ˆå™¨</a>
                    
                  </div>
                
                
                  <div class="post-meta">
                    <i class="iconfont icon-tags"></i>
                    
                      <a class="hover-with-bg" href="/tags/%E6%B5%8F%E8%A7%88%E5%99%A8%E7%B3%BB%E5%88%97/">æµè§ˆå™¨ç³»åˆ—</a>
                    
                  </div>
                
              </div>
              
                <p class="note note-warning">æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a target="_blank" href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh" rel="nofollow noopener noopener">CC BY-SA 4.0 åè®®</a> ï¼Œè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼</p>
              
              
                <div class="post-prevnext row">
                  <article class="post-prev col-6">
                    
                    
                      <a href="/2020/12/22/%E9%9D%A2%E8%AF%95%E9%A2%98/">
                        <i class="iconfont icon-arrowleft"></i>
                        <span class="hidden-mobile">é¢è¯•é¢˜</span>
                        <span class="visible-mobile">ä¸Šä¸€ç¯‡</span>
                      </a>
                    
                  </article>
                  <article class="post-next col-6">
                    
                    
                      <a href="/2020/11/24/browser/%E6%B5%8F%E8%A7%88%E5%99%A8%E7%BC%93%E5%AD%98%E6%96%B9%E5%BC%8F/">
                        <span class="hidden-mobile">æµè§ˆå™¨ä¸­çš„ç¼“å­˜æ–¹å¼</span>
                        <span class="visible-mobile">ä¸‹ä¸€ç¯‡</span>
                        <i class="iconfont icon-arrowright"></i>
                      </a>
                    
                  </article>
                </div>
              
            </div>

            
              <!-- Comments -->
              <article class="comments" id="comments">
                
                
  <div id="remark42"></div>
  <script type="text/javascript">
    Fluid.utils.waitElementVisible('remark42', function() {
      var schema = document.documentElement.getAttribute('data-user-color-scheme');
      if (schema !== 'light' && schema !== 'dark') {
        schema = 'light';
      }
      var remark_config = {
        host: 'http://42.192.68.190:8889',
        site_id: 'qiupo',
        components: ['embed'],
        url: '/2020/11/25/browser/%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF/',
        max_shown_comments: '10',
        theme: schema,
        page_title: 'Event Loopè§£è¯»',
        locale: 'zh'
      };

      (function (c) {
        for (var i = 0; i < c.length; i++) {
          var d = document, s = d.createElement('script');
          s.src = remark_config.host + '/web/' + c[i] + '.js';
          s.defer = true;
          (d.head || d.body).appendChild(s);
        }
      })(remark_config.components || [ 'embed' ]);
    });
  </script>
  <noscript>Please enable JavaScript to view the comments</noscript>


              </article>
            
          </article>
        </div>
      </div>
    </div>
    
      <div class="d-none d-lg-block col-lg-2 toc-container" id="toc-ctn">
        <div id="toc">
  <p class="toc-header"><i class="iconfont icon-list"></i>&nbsp;ç›®å½•</p>
  <div class="toc-body" id="toc-body"></div>
</div>

      </div>
    
  </div>
</div>

<!-- Custom -->


    

    
      <a id="scroll-top-button" href="#" role="button">
        <i class="iconfont icon-arrowup" aria-hidden="true"></i>
      </a>
    

    
      <div class="modal fade" id="modalSearch" tabindex="-1" role="dialog" aria-labelledby="ModalLabel"
     aria-hidden="true">
  <div class="modal-dialog modal-dialog-scrollable modal-lg" role="document">
    <div class="modal-content">
      <div class="modal-header text-center">
        <h4 class="modal-title w-100 font-weight-bold">æœç´¢</h4>
        <button type="button" id="local-search-close" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body mx-3">
        <div class="md-form mb-5">
          <input type="text" id="local-search-input" class="form-control validate">
          <label data-error="x" data-success="v"
                 for="local-search-input">å…³é”®è¯</label>
        </div>
        <div class="list-group" id="local-search-result"></div>
      </div>
    </div>
  </div>
</div>
    

    
  </main>

  <footer class="text-center mt-5 py-3">
  <div class="footer-content">
     <a href="https://hexo.io" target="_blank" rel="nofollow noopener"><span>Hexo</span></a> <i class="iconfont icon-love"></i> <a href="https://github.com/fluid-dev/hexo-theme-fluid" target="_blank" rel="nofollow noopener"><span>Fluid</span></a> 
  </div>
  

  
  <!-- å¤‡æ¡ˆä¿¡æ¯ -->
  <div class="beian">
    <a href="http://beian.miit.gov.cn/" target="_blank"
       rel="nofollow noopener">èµ£ICPå¤‡18015863å·-2</a>
    
  </div>


  
</footer>

<!-- SCRIPTS -->

  <script  src="https://cdn.staticfile.org/nprogress/0.2.0/nprogress.min.js" ></script>
  <link  rel="stylesheet" href="https://cdn.staticfile.org/nprogress/0.2.0/nprogress.min.css" />

  <script>
    NProgress.configure({"showSpinner":false,"trickleSpeed":200})
    NProgress.start()
    document.addEventListener('DOMContentLoaded', function() {
      window.NProgress && window.NProgress.inc();
    })
    window.addEventListener('load', function() {
      NProgress.done();
    })
  </script>


<script  src="https://cdn.staticfile.org/jquery/3.5.1/jquery.min.js" ></script>
<script  src="https://cdn.staticfile.org/twitter-bootstrap/4.5.3/js/bootstrap.min.js" ></script>
<script  src="/js/debouncer.js" ></script>
<script  src="/js/events.js" ></script>
<script  src="/js/plugins.js" ></script>

<!-- Plugins -->


  
    <script  src="/js/lazyload.js" ></script>
  



  



  <script  src="https://cdn.staticfile.org/tocbot/4.12.0/tocbot.min.js" ></script>



  <script  src="https://cdn.staticfile.org/fancybox/3.5.7/jquery.fancybox.min.js" ></script>



  <script  src="https://cdn.staticfile.org/anchor-js/4.3.0/anchor.min.js" ></script>



  <script defer src="https://cdn.staticfile.org/clipboard.js/2.0.6/clipboard.min.js" ></script>





  <script  src="https://cdn.staticfile.org/typed.js/2.0.11/typed.min.js" ></script>
  <script>
    (function (window, document) {
      var typing = Fluid.plugins.typing;
      var title = document.getElementById('subtitle').title;
      
      typing(title)
      
    })(window, document);
  </script>



  <script  src="/js/local-search.js" ></script>
  <script>
    (function () {
      var path = "/local-search.xml";
      var inputArea = document.querySelector("#local-search-input");
      inputArea.onclick = function () {
        searchFunc(path, 'local-search-input', 'local-search-result');
        this.onclick = null
      }
    })()
  </script>















<!-- ä¸»é¢˜çš„å¯åŠ¨é¡¹ ä¿æŒåœ¨æœ€åº•éƒ¨ -->
<script  src="/js/boot.js" ></script>



</body>
</html>
